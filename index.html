<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocVal API - Internal Documentation | PartRunner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --black: #0d0d0d;
      --black-card: rgba(20, 20, 20, 0.8);
      --black-elevated: rgba(30, 30, 30, 0.9);
      
      --yellow: #FFD60A;
      --yellow-bright: #FFE44D;
      --yellow-dim: #B8960A;
      --yellow-glow: rgba(255, 214, 10, 0.25);
      
      --white: #FFFFFF;
      --white-95: rgba(255,255,255,0.95);
      --white-80: rgba(255,255,255,0.8);
      --white-60: rgba(255,255,255,0.6);
      --white-40: rgba(255,255,255,0.4);
      --white-15: rgba(255,255,255,0.15);
      --white-08: rgba(255,255,255,0.08);
      
      --gradient-yellow: linear-gradient(135deg, #FFD60A 0%, #FF9500 100%);
      --gradient-gold: linear-gradient(135deg, #FFE44D 0%, #FFD60A 50%, #C9A800 100%);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(165deg, 
        #0d0d0d 0%, 
        #1a1a1f 25%, 
        #141418 50%, 
        #1f1a14 75%, 
        #0d0d0d 100%);
      background-attachment: fixed;
      color: var(--white);
      line-height: 1.6;
      min-height: 100vh;
    }

    /* Subtle texture overlay */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(ellipse 80% 50% at 20% 10%, rgba(255,214,10,0.04), transparent 50%),
        radial-gradient(ellipse 60% 40% at 80% 80%, rgba(255,149,0,0.03), transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 2rem;
    }

    /* Navigation */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1.5rem 0;
      border-bottom: 1px solid var(--white-08);
    }

    .nav-logo img {
      height: 32px;
    }

    .nav-badge {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.8rem;
      color: var(--white-60);
      background: var(--white-08);
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
    }

    .nav-badge .dot {
      width: 6px;
      height: 6px;
      background: #22c55e;
      border-radius: 50%;
    }

    /* Hero */
    .hero {
      padding: 5rem 0 4rem;
    }

    .hero-label {
      display: inline-block;
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--yellow);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 1rem;
    }

    h1 {
      font-size: clamp(2.25rem, 5vw, 3.5rem);
      font-weight: 700;
      line-height: 1.15;
      margin-bottom: 1.25rem;
      letter-spacing: -0.02em;
      color: var(--white-95);
    }

    h1 .highlight {
      color: var(--yellow);
    }

    .hero-description {
      font-size: 1.1rem;
      color: var(--white-60);
      max-width: 600px;
      line-height: 1.75;
      margin-bottom: 2rem;
    }

    .hero-meta {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      color: var(--white-60);
    }

    .meta-item strong {
      color: var(--yellow);
      font-weight: 600;
    }

    /* Quick Stats */
    .quick-stats {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin: 3rem 0;
    }

    .stat-card {
      background: var(--black-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--white-08);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
    }

    .stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--yellow);
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.8rem;
      color: var(--white-40);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* Section */
    section {
      margin: 4rem 0;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--white-95);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .section-title::before {
      content: '';
      width: 3px;
      height: 1.25rem;
      background: var(--yellow);
      border-radius: 2px;
    }

    /* Pipeline */
    .pipeline {
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
      margin-bottom: 3rem;
    }

    .pipeline-step {
      flex: 1;
      background: var(--black-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--white-08);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
    }

    .pipeline-step .num {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 28px;
      height: 28px;
      background: var(--yellow);
      color: var(--black);
      font-weight: 700;
      font-size: 0.8rem;
      border-radius: 6px;
      margin-bottom: 0.75rem;
    }

    .pipeline-step h4 {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--white-95);
      margin-bottom: 0.25rem;
    }

    .pipeline-step p {
      font-size: 0.8rem;
      color: var(--white-40);
    }

    .pipeline-arrow {
      display: flex;
      align-items: center;
      color: var(--white-15);
      font-size: 1.25rem;
    }

    /* Cards Grid */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .card {
      background: var(--black-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--white-08);
      border-radius: 12px;
      padding: 1.5rem;
      transition: border-color 0.2s;
    }

    .card:hover {
      border-color: var(--white-15);
    }

    .card-icon {
      font-size: 1.5rem;
      margin-bottom: 0.75rem;
    }

    .card h4 {
      font-size: 0.95rem;
      font-weight: 600;
      color: var(--white-95);
      margin-bottom: 0.375rem;
    }

    .card p {
      font-size: 0.85rem;
      color: var(--white-40);
      line-height: 1.5;
    }

    /* API Reference */
    .api-block {
      background: var(--black-card);
      backdrop-filter: blur(10px);
      border: 1px solid var(--white-08);
      border-radius: 14px;
      padding: 1.75rem;
      margin-bottom: 1.25rem;
    }

    .api-block h3 {
      font-size: 1rem;
      font-weight: 600;
      color: var(--yellow);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .api-block > p {
      color: var(--white-60);
      font-size: 0.9rem;
      margin-bottom: 1.25rem;
    }

    .api-block h4 {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--white-40);
      margin: 1.25rem 0 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .api-block code {
      background: var(--white-08);
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      color: var(--white-80);
    }

    /* Code blocks */
    .code-block {
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--white-08);
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 0.75rem;
    }

    .code-header {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.6rem 1rem;
      background: rgba(0,0,0,0.3);
      border-bottom: 1px solid var(--white-08);
    }

    .code-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .code-dot.red { background: #ff5f57; }
    .code-dot.yellow { background: #febc2e; }
    .code-dot.green { background: #28c840; }

    .code-title {
      margin-left: auto;
      font-size: 0.7rem;
      color: var(--white-40);
      font-family: 'JetBrains Mono', monospace;
    }

    pre {
      padding: 1rem 1.25rem;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.8rem;
      line-height: 1.7;
      color: var(--white-80);
    }

    .code-key { color: var(--yellow); }
    .code-str { color: #a8e6cf; }
    .code-num { color: #ffd3a5; }
    .code-bool { color: #c9b1ff; }

    /* Endpoints table */
    .endpoints-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .endpoint-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
    }

    .method {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      font-weight: 700;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      min-width: 40px;
      text-align: center;
    }

    .method.get {
      background: rgba(34, 197, 94, 0.2);
      color: #4ade80;
    }

    .method.post {
      background: rgba(255, 214, 10, 0.2);
      color: var(--yellow);
    }

    .endpoint-row code {
      background: transparent;
      color: var(--white-80);
      font-weight: 500;
    }

    .endpoint-row .desc {
      color: var(--white-40);
      font-size: 0.8rem;
      margin-left: auto;
    }

    /* Fields grid */
    .fields-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.5rem;
    }

    .field-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: rgba(0,0,0,0.3);
      border-radius: 8px;
    }

    .field-item code {
      color: var(--yellow);
      background: transparent;
      font-weight: 500;
      min-width: 120px;
    }

    .field-item span {
      color: var(--white-40);
      font-size: 0.8rem;
    }

    /* Footer */
    footer {
      border-top: 1px solid var(--white-08);
      padding: 2rem 0;
      margin-top: 4rem;
      text-align: center;
      color: var(--white-40);
      font-size: 0.85rem;
    }

    /* Responsive */
    @media (max-width: 800px) {
      .cards-grid { grid-template-columns: repeat(2, 1fr); }
      .quick-stats { grid-template-columns: repeat(2, 1fr); }
      .pipeline { flex-direction: column; }
      .pipeline-arrow { transform: rotate(90deg); justify-content: center; padding: 0.5rem; }
      .fields-grid { grid-template-columns: 1fr; }
    }

    @media (max-width: 550px) {
      .cards-grid, .quick-stats { grid-template-columns: 1fr; }
      .hero-meta { flex-direction: column; gap: 0.75rem; }
      .endpoint-row { flex-wrap: wrap; }
      .endpoint-row .desc { margin-left: 0; width: 100%; margin-top: 0.25rem; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Navigation -->
    <nav>
      <div class="nav-logo">
        <img src="/assets/FULL, BICOLOR@2x.png" alt="PartRunner" onerror="this.outerHTML='<span style=\"font-weight:700;font-size:1.1rem;color:var(--yellow)\">PartRunner</span>'">
      </div>
      <div class="nav-badge">
        <span class="dot"></span>
        API Online
      </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
      <span class="hero-label">Internal API Documentation</span>
      <h1>
        DocVal <span class="highlight">API</span><br>
        Document Validation Service
      </h1>
      <p class="hero-description">
        Servicio interno para extracci√≥n y validaci√≥n de documentos mexicanos. 
        Usa Google Vision OCR + GPT-4o para m√°xima precisi√≥n. 
        Integra con n8n, Supabase, o cualquier backend.
      </p>
      <div class="hero-meta">
        <div class="meta-item">
          <span>Base URL:</span>
          <strong>ai-document-extraction.vercel.app</strong>
        </div>
        <div class="meta-item">
          <span>Auth:</span>
          <strong>X-API-Key header</strong>
        </div>
      </div>
    </section>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="stat-card">
        <div class="stat-value">~97%</div>
        <div class="stat-label">Precisi√≥n OCR</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">&lt;2s</div>
        <div class="stat-label">Tiempo respuesta</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">6</div>
        <div class="stat-label">Tipos de docs</div>
      </div>
      <div class="stat-card">
        <div class="stat-value">5</div>
        <div class="stat-label">Validadores</div>
      </div>
    </div>

    <!-- Pipeline -->
    <section>
      <h2 class="section-title">Pipeline de Procesamiento</h2>
      <div class="pipeline">
        <div class="pipeline-step">
          <div class="num">1</div>
          <h4>Google Vision</h4>
          <p>Extracci√≥n de texto</p>
        </div>
        <div class="pipeline-arrow">‚Üí</div>
        <div class="pipeline-step">
          <div class="num">2</div>
          <h4>GPT-4o</h4>
          <p>Interpretaci√≥n sem√°ntica</p>
        </div>
        <div class="pipeline-arrow">‚Üí</div>
        <div class="pipeline-step">
          <div class="num">3</div>
          <h4>Checksum</h4>
          <p>Validaci√≥n matem√°tica</p>
        </div>
      </div>
    </section>

    <!-- Documentos Soportados -->
    <section>
      <h2 class="section-title">Documentos Soportados</h2>
      <div class="cards-grid">
        <div class="card">
          <div class="card-icon">ü™™</div>
          <h4>INE / IFE</h4>
          <p>CURP, nombre, clave elector, direcci√≥n, vigencia</p>
        </div>
        <div class="card">
          <div class="card-icon">üöó</div>
          <h4>Licencia de Conducir</h4>
          <p>N√∫mero, tipo, vigencia, nombre</p>
        </div>
        <div class="card">
          <div class="card-icon">üìã</div>
          <h4>Constancia RFC</h4>
          <p>RFC, raz√≥n social, domicilio fiscal</p>
        </div>
        <div class="card">
          <div class="card-icon">üöô</div>
          <h4>Tarjeta de Circulaci√≥n</h4>
          <p>Placas, VIN, modelo, marca, propietario</p>
        </div>
        <div class="card">
          <div class="card-icon">üõ°Ô∏è</div>
          <h4>P√≥liza de Seguro</h4>
          <p>Aseguradora, n√∫mero de p√≥liza, vigencia</p>
        </div>
        <div class="card">
          <div class="card-icon">üè¶</div>
          <h4>Car√°tula Bancaria</h4>
          <p>CLABE, banco, titular de cuenta</p>
        </div>
      </div>
    </section>

    <!-- API Reference -->
    <section>
      <h2 class="section-title">Referencia de API</h2>

      <!-- Auth -->
      <div class="api-block">
        <h3>üîê Autenticaci√≥n</h3>
        <p>Todos los endpoints requieren el header <code>X-API-Key</code> (excepto /api/health).</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">headers</span>
          </div>
          <pre><code><span class="code-key">X-API-Key</span>: tu-api-key-aqui</code></pre>
        </div>
      </div>

      <!-- Analyze -->
      <div class="api-block">
        <h3>üìÑ POST /api/documents/analyze</h3>
        <p>Endpoint principal. Acepta URL de imagen, archivo, o base64.</p>
        
        <h4>Opci√≥n 1: URL de imagen</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">curl</span>
          </div>
          <pre><code>curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="code-str">"Content-Type: application/json"</span> \
  -H <span class="code-str">"X-API-Key: tu-api-key"</span> \
  -d <span class="code-str">'{"url": "https://storage.ejemplo.com/ine.jpg"}'</span></code></pre>
        </div>

        <h4>Opci√≥n 2: Subir archivo</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">curl</span>
          </div>
          <pre><code>curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="code-str">"X-API-Key: tu-api-key"</span> \
  -F <span class="code-str">"file=@documento.jpg"</span></code></pre>
        </div>

        <h4>Opci√≥n 3: Base64</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">curl</span>
          </div>
          <pre><code>curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="code-str">"Content-Type: application/json"</span> \
  -H <span class="code-str">"X-API-Key: tu-api-key"</span> \
  -d <span class="code-str">'{"base64": "data:image/jpeg;base64,/9j/4AAQ..."}'</span></code></pre>
        </div>

        <h4>Respuesta</h4>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">response.json</span>
          </div>
          <pre><code>{
  <span class="code-key">"success"</span>: <span class="code-bool">true</span>,
  <span class="code-key">"data"</span>: {
    <span class="code-key">"isValid"</span>: <span class="code-bool">true</span>,
    <span class="code-key">"detectedType"</span>: <span class="code-str">"INE"</span>,
    <span class="code-key">"confidence"</span>: <span class="code-num">0.94</span>,
    <span class="code-key">"extractedData"</span>: {
      <span class="code-key">"nombre"</span>: <span class="code-str">"Juan P√©rez Garc√≠a"</span>,
      <span class="code-key">"curp"</span>: <span class="code-str">"PEGJ850101HDFRRL09"</span>,
      <span class="code-key">"claveElector"</span>: <span class="code-str">"PRGRJN85010109H800"</span>
    },
    <span class="code-key">"ocrEngine"</span>: <span class="code-str">"hybrid"</span>,
    <span class="code-key">"imageQuality"</span>: <span class="code-str">"buena"</span>,
    <span class="code-key">"processingTime"</span>: <span class="code-num">1850</span>
  }
}</code></pre>
        </div>
      </div>

      <!-- Validate Field -->
      <div class="api-block">
        <h3>‚úÖ POST /api/documents/validate-field</h3>
        <p>Valida y corrige autom√°ticamente CURP, RFC, CLABE, VIN, o Placas.</p>
        <div class="code-block">
          <div class="code-header">
            <span class="code-dot red"></span>
            <span class="code-dot yellow"></span>
            <span class="code-dot green"></span>
            <span class="code-title">curl</span>
          </div>
          <pre><code>curl -X POST https://ai-document-extraction.vercel.app/api/documents/validate-field \
  -H <span class="code-str">"Content-Type: application/json"</span> \
  -H <span class="code-str">"X-API-Key: tu-api-key"</span> \
  -d <span class="code-str">'{"field": "curp", "value": "PEGJ85O1O1HDFRRL09"}'</span></code></pre>
        </div>
        <p style="margin-top: 0.75rem; color: var(--white-40); font-size: 0.85rem;">
          ‚Üí Corrige autom√°ticamente errores OCR comunes (O‚Üí0, I‚Üí1, etc.)
        </p>
      </div>

      <!-- Other endpoints -->
      <div class="api-block">
        <h3>üìã Otros Endpoints</h3>
        <div class="endpoints-list">
          <div class="endpoint-row">
            <span class="method get">GET</span>
            <code>/api/health</code>
            <span class="desc">Health check (sin auth)</span>
          </div>
          <div class="endpoint-row">
            <span class="method get">GET</span>
            <code>/api/documents/supported-types</code>
            <span class="desc">Lista tipos de documentos</span>
          </div>
          <div class="endpoint-row">
            <span class="method post">POST</span>
            <code>/api/documents/analyze-base64</code>
            <span class="desc">Endpoint legacy (solo base64)</span>
          </div>
        </div>
      </div>

      <!-- Response fields -->
      <div class="api-block">
        <h3>üìä Campos de Respuesta</h3>
        <div class="fields-grid">
          <div class="field-item">
            <code>isValid</code>
            <span>Documento v√°lido (boolean)</span>
          </div>
          <div class="field-item">
            <code>detectedType</code>
            <span>INE, RFC, LICENCIA, etc.</span>
          </div>
          <div class="field-item">
            <code>confidence</code>
            <span>0.0 - 1.0</span>
          </div>
          <div class="field-item">
            <code>extractedData</code>
            <span>Campos extra√≠dos</span>
          </div>
          <div class="field-item">
            <code>ocrEngine</code>
            <span>hybrid | gpt-4o-vision</span>
          </div>
          <div class="field-item">
            <code>imageQuality</code>
            <span>buena, regular, mala</span>
          </div>
          <div class="field-item">
            <code>ocrCorrections</code>
            <span>Correcciones aplicadas</span>
          </div>
          <div class="field-item">
            <code>illegibleFields</code>
            <span>Campos marcados ***</span>
          </div>
        </div>
      </div>

      <!-- Notas -->
      <div class="api-block">
        <h3>‚ö†Ô∏è Notas Importantes</h3>
        <ul style="color: var(--white-60); font-size: 0.9rem; padding-left: 1.25rem; line-height: 1.8;">
          <li>Si un campo es ilegible, se marca con <code>***</code> en lugar de inventar datos</li>
          <li>Documentos con 3+ campos ilegibles se rechazan (<code>isValid: false</code>)</li>
          <li>Las correcciones OCR se registran en <code>ocrCorrections</code></li>
          <li>El campo <code>documentType</code> es opcional, se detecta autom√°ticamente</li>
        </ul>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <p>PartRunner Engineering ‚Ä¢ Internal Use Only</p>
    </footer>
  </div>
</body>
</html>
