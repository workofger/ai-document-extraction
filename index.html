<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DocVal API - Internal Documentation | PartRunner</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <!-- Swagger UI -->
  <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css">
  <style>
    :root {
      --yellow: #FFD60A;
      --yellow-dim: #BFA008;
      --surface: rgba(18, 18, 22, 0.95);
      --surface-light: rgba(30, 30, 36, 0.9);
      --surface-border: rgba(255, 255, 255, 0.1);
      --text-primary: #FFFFFF;
      --text-secondary: rgba(255, 255, 255, 0.75);
      --text-muted: rgba(255, 255, 255, 0.5);
      --green: #22c55e;
      --blue: #3b82f6;
      --red: #ef4444;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--text-primary);
      line-height: 1.6;
      min-height: 100vh;
      background: linear-gradient(165deg, #0a0a0c 0%, #141419 25%, #1a1510 50%, #12100e 100%);
      background-attachment: fixed;
    }

    .wrapper {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    .main-card {
      background: var(--surface);
      backdrop-filter: blur(40px);
      border: 1px solid var(--surface-border);
      border-radius: 20px;
      overflow: hidden;
    }

    /* Header */
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--surface-border);
      background: rgba(0,0,0,0.2);
    }

    .logo { height: 26px; }

    .header-right {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .status {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .status-dot {
      width: 6px;
      height: 6px;
      background: var(--green);
      border-radius: 50%;
      box-shadow: 0 0 6px var(--green);
    }

    .openapi-btn {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--surface-border);
      color: var(--text-secondary);
      padding: 0.4rem 0.75rem;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 500;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.15s;
    }

    .openapi-btn:hover {
      background: rgba(255,255,255,0.12);
      color: var(--text-primary);
    }

    /* Main Tabs */
    .main-tabs {
      display: flex;
      border-bottom: 1px solid var(--surface-border);
      background: rgba(0,0,0,0.15);
    }

    .main-tab {
      flex: 1;
      background: none;
      border: none;
      color: var(--text-muted);
      padding: 0.875rem 1.5rem;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.15s;
    }

    .main-tab:hover {
      color: var(--text-secondary);
      background: rgba(255,255,255,0.02);
    }

    .main-tab.active {
      color: var(--yellow);
      border-bottom-color: var(--yellow);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* Content */
    .content {
      padding: 2rem;
    }

    /* Hero */
    .hero {
      margin-bottom: 2rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--surface-border);
    }

    .hero-label {
      font-size: 0.7rem;
      font-weight: 700;
      color: var(--yellow);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      margin-bottom: 0.75rem;
    }

    h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin-bottom: 0.75rem;
    }

    h1 .hl { color: var(--yellow); }

    .hero p {
      color: var(--text-secondary);
      font-size: 0.95rem;
      margin-bottom: 1rem;
    }

    .hero-info {
      display: flex;
      gap: 1.5rem;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .hero-info strong {
      color: var(--yellow);
    }

    /* Document Selector */
    .doc-selector {
      background: var(--surface-light);
      border: 1px solid var(--surface-border);
      border-radius: 12px;
      padding: 1.25rem;
      margin-bottom: 2rem;
    }

    .doc-selector-label {
      font-size: 0.75rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.75rem;
    }

    .doc-tabs {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .doc-tab {
      background: rgba(255,255,255,0.05);
      border: 1px solid transparent;
      color: var(--text-muted);
      padding: 0.5rem 0.875rem;
      border-radius: 8px;
      font-size: 0.8rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s;
    }

    .doc-tab:hover {
      background: rgba(255,255,255,0.08);
      color: var(--text-secondary);
    }

    .doc-tab.active {
      background: var(--yellow);
      color: #000;
      font-weight: 600;
    }

    .doc-description {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--surface-border);
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .doc-fields {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .doc-fields code {
      background: rgba(255,214,10,0.15);
      color: var(--yellow);
      padding: 0.1rem 0.3rem;
      border-radius: 3px;
      font-size: 0.7rem;
      margin-right: 0.25rem;
    }

    /* Section */
    section {
      margin-bottom: 2rem;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .section-title::before {
      content: '';
      width: 3px;
      height: 1rem;
      background: var(--yellow);
      border-radius: 2px;
    }

    /* Endpoint Card */
    .endpoint {
      background: var(--surface-light);
      border: 1px solid var(--surface-border);
      border-radius: 12px;
      margin-bottom: 1rem;
      overflow: hidden;
    }

    .endpoint-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.25rem;
      background: rgba(0,0,0,0.2);
      border-bottom: 1px solid var(--surface-border);
    }

    .method {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.65rem;
      font-weight: 700;
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }

    .method.get { background: rgba(34,197,94,0.2); color: var(--green); }
    .method.post { background: rgba(255,214,10,0.2); color: var(--yellow); }

    .endpoint-path {
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.85rem;
      color: var(--text-primary);
    }

    .endpoint-auth {
      margin-left: auto;
      font-size: 0.65rem;
      padding: 0.2rem 0.4rem;
      background: rgba(239,68,68,0.15);
      color: var(--red);
      border-radius: 4px;
      font-weight: 600;
    }

    .endpoint-body {
      padding: 1.25rem;
    }

    .endpoint-desc {
      color: var(--text-secondary);
      font-size: 0.875rem;
      margin-bottom: 1rem;
    }

    .endpoint-formats {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .endpoint-formats strong {
      color: var(--text-secondary);
    }

    /* Code */
    .code-block {
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--surface-border);
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 0.75rem;
    }

    .code-header {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      padding: 0.5rem 0.75rem;
      background: rgba(0,0,0,0.3);
      border-bottom: 1px solid var(--surface-border);
    }

    .code-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
    }

    .code-dot.r { background: #ff5f57; }
    .code-dot.y { background: #febc2e; }
    .code-dot.g { background: #28c840; }

    .code-title {
      margin-left: auto;
      font-size: 0.65rem;
      color: var(--text-muted);
      font-family: 'JetBrains Mono', monospace;
    }

    pre {
      padding: 0.875rem;
      overflow-x: auto;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.75rem;
      line-height: 1.6;
      color: var(--text-secondary);
    }

    .ck { color: var(--yellow); }
    .cs { color: #a8e6cf; }
    .cn { color: #ffd3a5; }
    .cb { color: #c9b1ff; }

    /* Request Options */
    .request-options {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 0.75rem;
    }

    .req-opt {
      background: rgba(255,255,255,0.05);
      border: 1px solid transparent;
      color: var(--text-muted);
      padding: 0.35rem 0.65rem;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 500;
      cursor: pointer;
    }

    .req-opt:hover {
      background: rgba(255,255,255,0.08);
    }

    .req-opt.active {
      background: rgba(59,130,246,0.2);
      color: var(--blue);
      border-color: rgba(59,130,246,0.3);
    }

    .request-content, .response-content {
      display: none;
    }

    .request-content.active, .response-content.active {
      display: block;
    }

    /* Info boxes */
    .info-box {
      background: rgba(255,214,10,0.08);
      border: 1px solid rgba(255,214,10,0.2);
      border-radius: 8px;
      padding: 0.875rem;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: 1rem;
    }

    .info-box code {
      background: rgba(0,0,0,0.3);
      padding: 0.1rem 0.3rem;
      border-radius: 3px;
      font-size: 0.7rem;
    }

    /* Swagger Container */
    #swagger-container {
      padding: 0;
    }

    #swagger-ui {
      background: transparent !important;
    }

    /* API Key Input Section */
    .api-key-section {
      background: linear-gradient(135deg, rgba(255,214,10,0.15) 0%, rgba(255,214,10,0.05) 100%);
      border: 1px solid rgba(255,214,10,0.3);
      border-radius: 12px;
      padding: 1.25rem;
      margin: 1.5rem;
      margin-bottom: 0;
    }

    .api-key-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .api-key-icon {
      width: 40px;
      height: 40px;
      background: var(--yellow);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .api-key-icon svg {
      width: 22px;
      height: 22px;
      stroke: #000;
    }

    .api-key-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text-primary);
    }

    .api-key-subtitle {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
    }

    .api-key-input-row {
      display: flex;
      gap: 0.75rem;
    }

    .api-key-input {
      flex: 1;
      background: rgba(0,0,0,0.4);
      border: 1px solid var(--surface-border);
      border-radius: 8px;
      padding: 0.875rem 1rem;
      font-size: 0.9rem;
      font-family: 'JetBrains Mono', monospace;
      color: var(--text-primary);
      outline: none;
      transition: all 0.15s;
    }

    .api-key-input::placeholder {
      color: var(--text-muted);
      font-family: 'Inter', sans-serif;
    }

    .api-key-input:focus {
      border-color: var(--yellow);
      box-shadow: 0 0 0 3px rgba(255,214,10,0.15);
    }

    .api-key-btn {
      background: var(--yellow);
      border: none;
      border-radius: 8px;
      padding: 0 1.5rem;
      font-size: 0.875rem;
      font-weight: 600;
      color: #000;
      cursor: pointer;
      transition: all 0.15s;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .api-key-btn:hover {
      background: #e6c109;
      transform: translateY(-1px);
    }

    .api-key-btn.active {
      background: var(--green);
    }

    .api-key-status {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-top: 0.75rem;
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .api-key-status.connected {
      color: var(--green);
    }

    .api-key-status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--text-muted);
    }

    .api-key-status.connected .api-key-status-dot {
      background: var(--green);
      box-shadow: 0 0 8px var(--green);
    }

    /* Swagger UI Dark Theme Overrides - Enhanced Contrast */
    .swagger-ui .topbar { display: none !important; }
    .swagger-ui .scheme-container { display: none !important; }
    
    .swagger-ui {
      font-family: 'Inter', -apple-system, sans-serif !important;
    }

    .swagger-ui .info { margin: 20px 0 !important; padding: 0 20px !important; }
    .swagger-ui .info .title { color: #fff !important; font-size: 1.5rem !important; font-weight: 700 !important; }
    .swagger-ui .info .description p { color: #e0e0e0 !important; font-size: 0.9rem !important; line-height: 1.6 !important; }
    .swagger-ui .info .description h2 { color: #fff !important; font-size: 1.1rem !important; margin-top: 1.5rem !important; }
    .swagger-ui .info .description li { color: #d0d0d0 !important; }
    .swagger-ui .info .description strong { color: var(--yellow) !important; }
    .swagger-ui .info .description code { background: rgba(255,214,10,0.15) !important; color: var(--yellow) !important; padding: 0.1rem 0.4rem !important; border-radius: 4px !important; }
    .swagger-ui .info a { color: var(--yellow) !important; }
    .swagger-ui .info .base-url { color: #b0b0b0 !important; }

    .swagger-ui .wrapper { padding: 0 !important; }
    .swagger-ui .opblock-tag-section { padding: 0 20px !important; }
    
    .swagger-ui .opblock-tag { 
      color: #fff !important; 
      border-bottom: 1px solid var(--surface-border) !important; 
      font-size: 1.1rem !important;
      font-weight: 600 !important;
    }
    .swagger-ui .opblock-tag small { color: #a0a0a0 !important; font-size: 0.85rem !important; }
    
    .swagger-ui .opblock {
      background: rgba(30, 30, 36, 0.95) !important;
      border: 1px solid var(--surface-border) !important;
      border-radius: 8px !important;
      box-shadow: none !important;
      margin-bottom: 10px !important;
    }

    .swagger-ui .opblock .opblock-summary {
      border: none !important;
    }

    .swagger-ui .opblock.opblock-post { border-left: 3px solid var(--yellow) !important; }
    .swagger-ui .opblock.opblock-post .opblock-summary-method { background: var(--yellow) !important; color: #000 !important; font-weight: 700 !important; }
    
    .swagger-ui .opblock.opblock-get { border-left: 3px solid var(--green) !important; }
    .swagger-ui .opblock.opblock-get .opblock-summary-method { background: var(--green) !important; color: #000 !important; font-weight: 700 !important; }

    .swagger-ui .opblock .opblock-summary-path { color: #fff !important; font-weight: 500 !important; }
    .swagger-ui .opblock .opblock-summary-path__deprecated { color: #888 !important; }
    .swagger-ui .opblock .opblock-summary-description { color: #c0c0c0 !important; }

    .swagger-ui .opblock-body { background: rgba(0,0,0,0.2) !important; }
    .swagger-ui .opblock-description-wrapper { padding: 15px !important; }
    .swagger-ui .opblock-description-wrapper p { color: #d0d0d0 !important; font-size: 0.9rem !important; }
    .swagger-ui .opblock-description-wrapper h4 { color: #fff !important; }
    .swagger-ui .opblock-description-wrapper code { background: rgba(255,214,10,0.15) !important; color: var(--yellow) !important; }

    .swagger-ui .opblock-section-header {
      background: rgba(0,0,0,0.3) !important;
      border-radius: 4px !important;
    }

    .swagger-ui .opblock-section-header h4 { color: #fff !important; font-weight: 600 !important; }
    .swagger-ui .opblock-section-header label { color: #c0c0c0 !important; }

    .swagger-ui .tab-header .tab-item.active h4 span::after { background: var(--yellow) !important; }

    .swagger-ui .parameters-col_description p { color: #c0c0c0 !important; }
    .swagger-ui .parameters-col_description input { color: #fff !important; }
    .swagger-ui .parameter__name { color: #fff !important; font-weight: 600 !important; }
    .swagger-ui .parameter__name.required::after { color: var(--red) !important; }
    .swagger-ui .parameter__type { color: var(--yellow) !important; }
    .swagger-ui .parameter__in { color: #a0a0a0 !important; }
    .swagger-ui .parameter__extension { color: #888 !important; }

    .swagger-ui table { background: transparent !important; }
    .swagger-ui table thead tr th { color: #c0c0c0 !important; border-bottom: 1px solid var(--surface-border) !important; }
    .swagger-ui table tbody tr td { 
      border-bottom: 1px solid var(--surface-border) !important; 
      color: #c0c0c0 !important;
    }
    
    .swagger-ui .response-col_status { color: #fff !important; font-weight: 600 !important; }
    .swagger-ui .response-col_description { color: #c0c0c0 !important; }
    .swagger-ui .response-col_links { color: #888 !important; }

    .swagger-ui .responses-inner h4, .swagger-ui .responses-inner h5 { color: #fff !important; }
    .swagger-ui .response-control-media-type__title { color: #c0c0c0 !important; }
    .swagger-ui .response-control-media-type--accept-controller select { color: #fff !important; }

    .swagger-ui .model-title { color: #fff !important; }
    .swagger-ui .model { color: #c0c0c0 !important; }
    .swagger-ui .model-toggle::after { background: url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23FFD60A" d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>') !important; }

    .swagger-ui .btn {
      border-radius: 6px !important;
      font-weight: 600 !important;
    }

    .swagger-ui .btn.execute {
      background: var(--yellow) !important;
      border-color: var(--yellow) !important;
      color: #000 !important;
    }

    .swagger-ui .btn.execute:hover {
      background: #e6c109 !important;
    }

    .swagger-ui .btn.cancel {
      background: transparent !important;
      border-color: var(--red) !important;
      color: var(--red) !important;
    }

    .swagger-ui .btn.authorize {
      background: transparent !important;
      border-color: var(--yellow) !important;
      color: var(--yellow) !important;
    }

    .swagger-ui .btn-group { background: transparent !important; }

    .swagger-ui .authorization__btn { fill: var(--yellow) !important; }
    .swagger-ui .unlocked svg { fill: var(--green) !important; }
    .swagger-ui .locked svg { fill: var(--yellow) !important; }

    .swagger-ui input[type=text], .swagger-ui input[type=password], .swagger-ui textarea {
      background: rgba(0,0,0,0.4) !important;
      border: 1px solid var(--surface-border) !important;
      color: #fff !important;
      border-radius: 6px !important;
    }

    .swagger-ui input[type=text]:focus, .swagger-ui input[type=password]:focus, .swagger-ui textarea:focus {
      border-color: var(--yellow) !important;
      box-shadow: 0 0 0 2px rgba(255,214,10,0.2) !important;
    }

    .swagger-ui select {
      background: rgba(0,0,0,0.4) !important;
      border: 1px solid var(--surface-border) !important;
      color: #fff !important;
      border-radius: 6px !important;
    }

    .swagger-ui .highlight-code {
      background: rgba(0,0,0,0.5) !important;
      border-radius: 6px !important;
    }

    .swagger-ui .microlight { 
      color: #e0e0e0 !important; 
      font-size: 0.85rem !important;
      line-height: 1.5 !important;
    }
    
    .swagger-ui .copy-to-clipboard { background: rgba(255,255,255,0.1) !important; border-radius: 4px !important; }
    .swagger-ui .copy-to-clipboard button { background: transparent !important; }

    .swagger-ui .dialog-ux .modal-ux {
      background: var(--surface) !important;
      border: 1px solid var(--surface-border) !important;
      border-radius: 12px !important;
    }

    .swagger-ui .dialog-ux .modal-ux-header { border-bottom: 1px solid var(--surface-border) !important; }
    .swagger-ui .dialog-ux .modal-ux-header h3 { color: #fff !important; }
    .swagger-ui .dialog-ux .modal-ux-content { padding: 20px !important; }
    .swagger-ui .dialog-ux .modal-ux-content p { color: #c0c0c0 !important; }
    .swagger-ui .dialog-ux .modal-ux-content label { color: #fff !important; }

    .swagger-ui .model-box {
      background: rgba(0,0,0,0.3) !important;
      border-radius: 6px !important;
    }

    .swagger-ui .prop-type { color: var(--yellow) !important; }
    .swagger-ui .prop-format { color: #888 !important; }

    .swagger-ui section.models {
      border: 1px solid var(--surface-border) !important;
      border-radius: 8px !important;
      margin: 20px !important;
    }

    .swagger-ui section.models h4 { color: #fff !important; }
    .swagger-ui section.models .model-container { background: transparent !important; }
    .swagger-ui section.models .model-container:hover { background: rgba(255,255,255,0.02) !important; }

    .swagger-ui .servers > label { color: #fff !important; }
    .swagger-ui .servers > label select { margin-left: 10px !important; }

    .swagger-ui .loading-container .loading::after { color: var(--yellow) !important; }

    .swagger-ui .opblock-deprecated { opacity: 0.6 !important; }
    .swagger-ui .opblock-deprecated .opblock-summary-method { background: #888 !important; }

    .swagger-ui .try-out__btn { 
      border-color: var(--yellow) !important; 
      color: var(--yellow) !important;
    }
    
    .swagger-ui .try-out__btn:hover {
      background: rgba(255,214,10,0.1) !important;
    }

    /* JSON Syntax Highlighting */
    .swagger-ui .renderedMarkdown code { color: var(--yellow) !important; }
    .swagger-ui .json-schema-2020-12-keyword { color: #c792ea !important; }
    .swagger-ui .json-schema-2020-12-keyword__value { color: #89ddff !important; }
    .swagger-ui .json-schema-2020-12-keyword__name { color: #ffcb6b !important; }

    /* Example Values */
    .swagger-ui .example { color: #c0c0c0 !important; }

    /* Footer */
    .footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--surface-border);
      text-align: center;
      font-size: 0.75rem;
      color: var(--text-muted);
      background: rgba(0,0,0,0.2);
    }

    /* Responsive */
    @media (max-width: 600px) {
      .wrapper { padding: 0.75rem; }
      .content { padding: 1.25rem; }
      .hero-info { flex-direction: column; gap: 0.5rem; }
      .doc-tabs { gap: 0.35rem; }
      .doc-tab { padding: 0.4rem 0.6rem; font-size: 0.7rem; }
      .header-right { gap: 0.5rem; }
      .openapi-btn span { display: none; }
    }
  </style>
  </head>
  <body>
  <div class="wrapper">
    <div class="main-card">
      <!-- Header -->
      <header class="header">
        <img src="/assets/FULL, BICOLOR@2x.png" alt="PartRunner" class="logo" onerror="this.outerHTML='<span style=\"font-weight:700;color:var(--yellow)\">PARTRUNNER</span>'">
        <div class="header-right">
          <a href="/api/openapi?format=yaml" class="openapi-btn" download="openapi.yaml">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            <span>OpenAPI YAML</span>
          </a>
          <a href="/api/openapi?format=json" class="openapi-btn" download="openapi.json">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            <span>OpenAPI JSON</span>
          </a>
          <div class="status">
            <span class="status-dot"></span>
            API Online
          </div>
        </div>
      </header>

      <!-- Main Tabs -->
      <div class="main-tabs">
        <button class="main-tab active" onclick="switchTab('quickstart')">Quick Start</button>
        <button class="main-tab" onclick="switchTab('swagger')">Interactive API (Swagger)</button>
      </div>

      <!-- Quick Start Tab -->
      <div id="tab-quickstart" class="tab-content active">
        <div class="content">
          <!-- Hero -->
          <div class="hero">
            <div class="hero-label">Internal API Documentation v1.1</div>
            <h1>DocVal <span class="hl">API</span></h1>
            <p>Mexican document extraction & validation service. Hybrid OCR pipeline: Google Vision + GPT-4o + checksum validation + fraud detection. Supports 24+ document types including vehicle photos.</p>
            <div class="hero-info">
              <span>Base URL: <strong>ai-document-extraction.vercel.app</strong></span>
              <span>Auth: <strong>X-API-Key header</strong></span>
            </div>
          </div>

          <!-- Document Type Selector -->
          <div class="doc-selector">
            <div class="doc-selector-label">Select document type to see relevant examples</div>
            <div class="doc-tabs">
              <button class="doc-tab active" onclick="selectDoc('ine')">INE / IFE</button>
              <button class="doc-tab" onclick="selectDoc('licencia')">Driver's License</button>
              <button class="doc-tab" onclick="selectDoc('cedula')">Professional License</button>
              <button class="doc-tab" onclick="selectDoc('imss')">IMSS / ISSSTE</button>
              <button class="doc-tab" onclick="selectDoc('rfc')">RFC Certificate</button>
              <button class="doc-tab" onclick="selectDoc('circulacion')">Vehicle Reg.</button>
              <button class="doc-tab" onclick="selectDoc('poliza')">Insurance</button>
              <button class="doc-tab" onclick="selectDoc('banco')">Bank Statement</button>
              <button class="doc-tab" onclick="selectDoc('foto_vehiculo')">Vehicle Photos</button>
            </div>
            <div class="doc-description">
              <span id="doc-desc">Mexican voter ID card with photo, personal data, and unique identifiers.</span>
              <div class="doc-fields">
                <strong>Extracted fields:</strong> <span id="doc-fields-list"><code>nombre</code><code>curp</code><code>claveElector</code><code>direccion</code><code>codigoPostal</code><code>vigencia</code><code>folio</code></span>
              </div>
            </div>
          </div>

          <!-- ENDPOINTS -->
          <section>
            <h2 class="section-title">API Endpoints</h2>

            <!-- POST /api/documents/analyze -->
            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/documents/analyze</span>
                <span class="endpoint-auth">üîê Auth Required</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">
                  <strong>Main endpoint.</strong> Analyze document images or PDFs and extract structured data.
                </p>
                <p class="endpoint-formats">
                  <strong>Accepts:</strong> Image URL, file upload (multipart), base64, or PDF<br>
                  <strong>Formats:</strong> JPEG, PNG, WebP, GIF, PDF<br>
                  <strong>PDF note:</strong> Multi-page PDFs ‚Üí first page extracted automatically
                </p>

                <div class="request-options">
                  <button class="req-opt active" onclick="selectReqType('url')">Image URL</button>
                  <button class="req-opt" onclick="selectReqType('pdfurl')">PDF URL</button>
                  <button class="req-opt" onclick="selectReqType('file')">File Upload</button>
                  <button class="req-opt" onclick="selectReqType('base64')">Base64</button>
                </div>

                <!-- Image URL Request -->
                <div id="req-url" class="request-content active">
                  <div class="code-block">
                    <div class="code-header">
                      <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                      <span class="code-title">curl - Image URL</span>
                    </div>
                    <pre>curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"Content-Type: application/json"</span> \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -d <span class="cs">'{"url": "https://storage.example.com/<span id="url-example">ine</span>.jpg"}'</span></pre>
                  </div>
                </div>

                <!-- PDF URL Request -->
                <div id="req-pdfurl" class="request-content">
                  <div class="code-block">
                    <div class="code-header">
                      <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                      <span class="code-title">curl - PDF URL</span>
                    </div>
                    <pre>curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"Content-Type: application/json"</span> \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -d <span class="cs">'{"url": "https://storage.example.com/<span id="pdfurl-example">constancia_fiscal</span>.pdf"}'</span></pre>
                  </div>
                </div>

                <!-- File Upload Request -->
                <div id="req-file" class="request-content">
                  <div class="code-block">
                    <div class="code-header">
                      <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                      <span class="code-title">curl - File Upload (image or PDF)</span>
                    </div>
                    <pre><span class="cs"># Image upload</span>
curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -F <span class="cs">"file=@<span id="file-example">ine</span>.jpg"</span>

<span class="cs"># PDF upload</span>
curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -F <span class="cs">"file=@documento.pdf"</span></pre>
                  </div>
                </div>

                <!-- Base64 Request -->
                <div id="req-base64" class="request-content">
                  <div class="code-block">
                    <div class="code-header">
                      <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                      <span class="code-title">curl - Base64 (image or PDF)</span>
                    </div>
                    <pre><span class="cs"># Image base64</span>
curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"Content-Type: application/json"</span> \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -d <span class="cs">'{"document": "data:image/jpeg;base64,/9j/4AAQ..."}'</span>

<span class="cs"># PDF base64</span>
curl -X POST https://ai-document-extraction.vercel.app/api/documents/analyze \
  -H <span class="cs">"Content-Type: application/json"</span> \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -d <span class="cs">'{"document": "data:application/pdf;base64,JVBERi0..."}'</span></pre>
                  </div>
                </div>

                <!-- Response -->
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                    <span class="code-title">Response</span>
                  </div>
                  <pre id="analyze-response">{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"INE"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. 1 OCR correction applied."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.94</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"PEGJ850101HDFRRL09"</span>,
      <span class="ck">"claveElector"</span>: <span class="cs">"PRGRJN85010109H800"</span>,
      <span class="ck">"direccion"</span>: <span class="cs">"Calle Reforma 123, Col Centro"</span>,
      <span class="ck">"codigoPostal"</span>: <span class="cs">"06600"</span>,
      <span class="ck">"vigencia"</span>: <span class="cs">"2029"</span>,
      <span class="ck">"folio"</span>: <span class="cs">"1234567890123"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.97</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [<span class="cs">"Position 4: O ‚Üí 0"</span>],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"processingTime"</span>: <span class="cn">1850</span>
  }
}</pre>
                </div>
              </div>
            </div>

            <!-- POST /api/documents/validate-field -->
            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/documents/validate-field</span>
                <span class="endpoint-auth">üîê Auth Required</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">
                  <strong>Validate & auto-correct</strong> individual fields with checksum verification.
                </p>
                <p class="endpoint-formats">
                  <strong>Supported fields:</strong> <code>curp</code> <code>rfc</code> <code>clabe</code> <code>vin</code> <code>placas</code> <code>nss</code>
                </p>

                <div class="code-block">
                  <div class="code-header">
                    <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                    <span class="code-title">curl</span>
                  </div>
                  <pre>curl -X POST https://ai-document-extraction.vercel.app/api/documents/validate-field \
  -H <span class="cs">"Content-Type: application/json"</span> \
  -H <span class="cs">"X-API-Key: YOUR_API_KEY"</span> \
  -d <span class="cs">'{"field": "<span id="validate-field">curp</span>", "value": "<span id="validate-value">PEGJ85O1O1HDFRRL09</span>"}'</span></pre>
                </div>

                <div class="code-block">
                  <div class="code-header">
                    <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                    <span class="code-title">Response</span>
                  </div>
                  <pre id="validate-response">{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"field"</span>: <span class="cs">"curp"</span>,
    <span class="ck">"originalValue"</span>: <span class="cs">"PEGJ85O1O1HDFRRL09"</span>,
    <span class="ck">"valid"</span>: <span class="cb">true</span>,
    <span class="ck">"corrected"</span>: <span class="cs">"PEGJ850101HDFRRL09"</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.95</span>,
    <span class="ck">"corrections"</span>: [
      <span class="cs">"Position 4: O ‚Üí 0"</span>,
      <span class="cs">"Position 6: O ‚Üí 0"</span>
    ]
  }
}</pre>
                </div>
              </div>
            </div>

            <!-- Other Endpoints -->
            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/health</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">Health check. <strong>No authentication required.</strong></p>
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                    <span class="code-title">Response</span>
                  </div>
                  <pre>{
  <span class="ck">"status"</span>: <span class="cs">"ok"</span>,
  <span class="ck">"timestamp"</span>: <span class="cs">"2026-01-08T20:30:00.000Z"</span>,
  <span class="ck">"version"</span>: <span class="cs">"1.0.0"</span>
}</pre>
                </div>
              </div>
            </div>

            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/documents/supported-types</span>
                <span class="endpoint-auth">üîê Auth Required</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">Returns list of supported document types and extractable fields.</p>
              </div>
            </div>

            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method post">POST</span>
                <span class="endpoint-path">/api/documents/analyze-base64</span>
                <span class="endpoint-auth">üîê Auth Required</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">Legacy endpoint. Base64 only. Use <code>/api/documents/analyze</code> instead.</p>
              </div>
            </div>

            <div class="endpoint">
              <div class="endpoint-header">
                <span class="method get">GET</span>
                <span class="endpoint-path">/api/metrics</span>
                <span class="endpoint-auth">üîê Auth Required</span>
              </div>
              <div class="endpoint-body">
                <p class="endpoint-desc">
                  <strong>API Metrics & Dashboard.</strong> Returns usage statistics, document type breakdown, processing times, and fraud detection metrics.
                </p>
                <div class="code-block">
                  <div class="code-header">
                    <span class="code-dot r"></span><span class="code-dot y"></span><span class="code-dot g"></span>
                    <span class="code-title">Response</span>
                  </div>
                  <pre>{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"overview"</span>: {
      <span class="ck">"totalRequests"</span>: <span class="cn">1542</span>,
      <span class="ck">"successRate"</span>: <span class="cs">"94.50%"</span>,
      <span class="ck">"uptime"</span>: <span class="cs">"2h 35m"</span>
    },
    <span class="ck">"processing"</span>: {
      <span class="ck">"avgProcessingTimeMs"</span>: <span class="cn">1850</span>
    },
    <span class="ck">"documentTypes"</span>: {
      <span class="ck">"topUsed"</span>: { <span class="ck">"ine"</span>: <span class="cn">450</span>, <span class="ck">"licencia"</span>: <span class="cn">230</span> }
    },
    <span class="ck">"fraud"</span>: {
      <span class="ck">"totalChecks"</span>: <span class="cn">1450</span>,
      <span class="ck">"flaggedDocuments"</span>: <span class="cn">12</span>,
      <span class="ck">"flagRate"</span>: <span class="cs">"0.83%"</span>
    },
    <span class="ck">"capabilities"</span>: {
      <span class="ck">"supportedDocumentTypes"</span>: <span class="cn">24</span>,
      <span class="ck">"extractableFields"</span>: <span class="cn">35</span>,
      <span class="ck">"validatableFields"</span>: [<span class="cs">"curp"</span>, <span class="cs">"rfc"</span>, <span class="cs">"clabe"</span>, <span class="cs">"vin"</span>, <span class="cs">"placas"</span>, <span class="cs">"nss"</span>]
    }
  }
}</pre>
                </div>
              </div>
            </div>
          </section>

          <!-- Notes -->
          <section>
            <h2 class="section-title">Important Notes</h2>
            <div class="info-box">
              <strong>‚ö†Ô∏è Data Integrity:</strong> The API never invents data. Illegible characters are marked with <code>*</code> and completely unreadable fields with <code>***</code>.<br><br>
              <strong>üìã Rejection:</strong> Documents with 3+ illegible fields or poor image quality are rejected (<code>isValid: false</code>).<br><br>
              <strong>üîß Auto-correction:</strong> Common OCR errors (O‚Üí0, I‚Üí1) are automatically corrected and logged in <code>ocrCorrections</code>. CURP verification digit is validated and corrected using the official algorithm.<br><br>
              <strong>üõ°Ô∏è Fraud Detection:</strong> Every analysis includes a <code>fraudAnalysis</code> object with risk scoring (low/medium/high/critical), fraud indicators, and recommendations. Checks include: CURP checksum, state code validation, RFC cross-validation, expiration dates, and data consistency.<br><br>
              <strong>‚úÖ Validatable Fields:</strong> <code>curp</code> <code>rfc</code> <code>clabe</code> <code>vin</code> <code>placas</code> <code>nss</code><br><br>
              <strong>üì∑ Formats:</strong> JPEG, PNG, WebP, GIF, and PDF (first page extracted for multi-page PDFs).<br><br>
              <strong>üöó Vehicle Photos:</strong> Supports analysis of vehicle photographs (frontal, lateral, rear, VIN plate, motor, odometer, damage photos) with automatic brand/model identification.
            </div>
          </section>
        </div>
      </div>

      <!-- Swagger Tab -->
      <div id="tab-swagger" class="tab-content">
        <!-- API Key Input Section -->
        <div class="api-key-section">
          <div class="api-key-header">
            <div class="api-key-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
              </svg>
            </div>
            <div>
              <div class="api-key-title">API Key Authentication</div>
              <div class="api-key-subtitle">Enter your API key to enable all requests below</div>
            </div>
          </div>
          <div class="api-key-input-row">
            <input type="text" id="global-api-key" class="api-key-input" placeholder="Paste your X-API-Key here..." autocomplete="off">
            <button id="apply-api-key" class="api-key-btn" onclick="applyApiKey()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M5 12l5 5L20 7"/>
              </svg>
              Apply
            </button>
          </div>
          <div id="api-key-status" class="api-key-status">
            <span class="api-key-status-dot"></span>
            <span>No API key configured</span>
          </div>
        </div>

        <div id="swagger-container">
          <div id="swagger-ui"></div>
        </div>
      </div>

      <footer class="footer">
        PartRunner Engineering ¬∑ Internal Use Only
      </footer>
    </div>
  </div>

  <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
  <script>
    // Document data
    const docData = {
      ine: {
        desc: "Mexican voter ID card with photo, personal data, and unique identifiers.",
        fields: ["nombre", "curp", "claveElector", "direccion", "codigoPostal", "vigencia", "folio", "sexo", "fechaNacimiento"],
        filename: "ine",
        validateField: "curp",
        validateValue: "PEGJ85O1O1HDFRRL09",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"INE"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. 1 OCR correction applied."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.94</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"PEGJ850101HDFRRL09"</span>,
      <span class="ck">"claveElector"</span>: <span class="cs">"PRGRJN85010109H800"</span>,
      <span class="ck">"direccion"</span>: <span class="cs">"Calle Reforma 123, Col Centro"</span>,
      <span class="ck">"codigoPostal"</span>: <span class="cs">"06600"</span>,
      <span class="ck">"vigencia"</span>: <span class="cs">"2029"</span>,
      <span class="ck">"folio"</span>: <span class="cs">"1234567890123"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.97</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [<span class="cs">"Verification digit: 8 ‚Üí 9 (checksum)"</span>],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"fraudAnalysis"</span>: {
      <span class="ck">"isAuthentic"</span>: <span class="cb">true</span>,
      <span class="ck">"riskLevel"</span>: <span class="cs">"low"</span>,
      <span class="ck">"riskScore"</span>: <span class="cn">5</span>,
      <span class="ck">"fraudIndicators"</span>: [],
      <span class="ck">"recommendations"</span>: []
    },
    <span class="ck">"processingTime"</span>: <span class="cn">1850</span>
  }
}`
      },
      licencia: {
        desc: "Mexican driver's license with personal data, license number, and validity dates.",
        fields: ["nombre", "curp", "numeroLicencia", "tipoLicencia", "vigencia", "vigenciaFin", "direccion", "codigoPostal"],
        filename: "licencia",
        validateField: "curp",
        validateValue: "LOHM90O515MDFRPR01",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Licencia de Conducir"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. CURP checksum verified."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.91</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Mar√≠a L√≥pez Hern√°ndez"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"LOHM900515MDFRPR01"</span>,
      <span class="ck">"numeroLicencia"</span>: <span class="cs">"A123456789"</span>,
      <span class="ck">"tipoLicencia"</span>: <span class="cs">"Tipo A - Automovilista"</span>,
      <span class="ck">"vigencia"</span>: <span class="cs">"2025-05-15"</span>,
      <span class="ck">"vigenciaFin"</span>: <span class="cs">"2028-05-15"</span>,
      <span class="ck">"direccion"</span>: <span class="cs">"Av. Insurgentes 456"</span>,
      <span class="ck">"codigoPostal"</span>: <span class="cs">"03100"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.95</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"crossValidationWarnings"</span>: [],
    <span class="ck">"timestamp"</span>: <span class="cs">"2026-01-09T02:00:00.000Z"</span>,
    <span class="ck">"processingTime"</span>: <span class="cn">1720</span>
  }
}`
      },
      rfc: {
        desc: "Tax ID certificate (Constancia de Situaci√≥n Fiscal) from SAT with RFC and fiscal data.",
        fields: ["nombre", "rfc", "curp", "razonSocial", "direccion", "codigoPostal", "email", "telefono"],
        filename: "constancia_rfc",
        validateField: "rfc",
        validateValue: "PEGJ85O1O1ABC",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Constancia de Situaci√≥n Fiscal"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. RFC and CURP checksums verified."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.96</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"rfc"</span>: <span class="cs">"PEGJ850101ABC"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"PEGJ850101HDFRRL09"</span>,
      <span class="ck">"razonSocial"</span>: <span class="cs">"Persona F√≠sica"</span>,
      <span class="ck">"direccion"</span>: <span class="cs">"Calle Reforma 123, Col Centro, CDMX"</span>,
      <span class="ck">"codigoPostal"</span>: <span class="cs">"06600"</span>,
      <span class="ck">"email"</span>: <span class="cs">"juan.perez@email.com"</span>,
      <span class="ck">"telefono"</span>: <span class="cs">"5551234567"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.98</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"crossValidationWarnings"</span>: [],
    <span class="ck">"timestamp"</span>: <span class="cs">"2026-01-09T02:00:00.000Z"</span>,
    <span class="ck">"processingTime"</span>: <span class="cn">1650</span>
  }
}`
      },
      circulacion: {
        desc: "Vehicle registration card with plate number, VIN, and vehicle details.",
        fields: ["nombre", "placas", "vin", "marca", "modelo", "anio", "vigencia", "folio"],
        filename: "tarjeta_circulacion",
        validateField: "vin",
        validateValue: "1HGBH41JXMNI09186",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Tarjeta de Circulaci√≥n"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. VIN checksum verified. 1 OCR correction applied."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.93</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"placas"</span>: <span class="cs">"ABC-123-A"</span>,
      <span class="ck">"vin"</span>: <span class="cs">"1HGBH41JXMN109186"</span>,
      <span class="ck">"marca"</span>: <span class="cs">"Honda"</span>,
      <span class="ck">"modelo"</span>: <span class="cs">"Civic"</span>,
      <span class="ck">"anio"</span>: <span class="cs">"2022"</span>,
      <span class="ck">"vigencia"</span>: <span class="cs">"2026-12-31"</span>,
      <span class="ck">"folio"</span>: <span class="cs">"TC-2022-123456"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.94</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [<span class="cs">"VIN Position 11: I ‚Üí 1"</span>],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"crossValidationWarnings"</span>: [],
    <span class="ck">"timestamp"</span>: <span class="cs">"2026-01-09T02:00:00.000Z"</span>,
    <span class="ck">"processingTime"</span>: <span class="cn">1890</span>
  }
}`
      },
      poliza: {
        desc: "Vehicle insurance policy with policy number, coverage dates, and vehicle info.",
        fields: ["nombre", "aseguradora", "poliza", "placas", "vin", "marca", "modelo", "vigencia", "vigenciaFin"],
        filename: "poliza_seguro",
        validateField: "vin",
        validateValue: "1HGBH41JXMNI09186",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"P√≥liza de Seguro"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. VIN checksum verified."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.89</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"aseguradora"</span>: <span class="cs">"Qualitas"</span>,
      <span class="ck">"poliza"</span>: <span class="cs">"POL-2024-789456"</span>,
      <span class="ck">"placas"</span>: <span class="cs">"ABC-123-A"</span>,
      <span class="ck">"vin"</span>: <span class="cs">"1HGBH41JXMN109186"</span>,
      <span class="ck">"marca"</span>: <span class="cs">"Honda"</span>,
      <span class="ck">"modelo"</span>: <span class="cs">"Civic"</span>,
      <span class="ck">"vigencia"</span>: <span class="cs">"2024-01-01"</span>,
      <span class="ck">"vigenciaFin"</span>: <span class="cs">"2025-01-01"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.88</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"regular"</span>,
    <span class="ck">"ocrCorrections"</span>: [],
    <span class="ck">"illegibleFields"</span>: [],
    <span class="ck">"crossValidationWarnings"</span>: [<span class="cs">"Image quality is regular, some fields may be less accurate"</span>],
    <span class="ck">"timestamp"</span>: <span class="cs">"2026-01-09T02:00:00.000Z"</span>,
    <span class="ck">"processingTime"</span>: <span class="cn">2100</span>
  }
}`
      },
      banco: {
        desc: "Bank statement or account cover page with CLABE, account number, and holder info.",
        fields: ["nombre", "banco", "clabe", "numeroCuenta", "rfc", "direccion"],
        filename: "estado_cuenta",
        validateField: "clabe",
        validateValue: "O1218OOO1234567890",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Car√°tula Bancaria"</span>,
    <span class="ck">"matchesExpected"</span>: <span class="cb">true</span>,
    <span class="ck">"reason"</span>: <span class="cs">"Valid document. CLABE checksum verified. 3 OCR corrections applied."</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.92</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"banco"</span>: <span class="cs">"BBVA"</span>,
      <span class="ck">"clabe"</span>: <span class="cs">"012180001234567890"</span>,
      <span class="ck">"numeroCuenta"</span>: <span class="cs">"1234567890"</span>,
      <span class="ck">"rfc"</span>: <span class="cs">"PEGJ850101ABC"</span>,
      <span class="ck">"direccion"</span>: <span class="cs">"Calle Reforma 123"</span>
    },
    <span class="ck">"ocrEngine"</span>: <span class="cs">"hybrid"</span>,
    <span class="ck">"visionConfidence"</span>: <span class="cn">0.93</span>,
    <span class="ck">"imageQuality"</span>: <span class="cs">"buena"</span>,
    <span class="ck">"ocrCorrections"</span>: [<span class="cs">"CLABE Position 0: O ‚Üí 0"</span>],
    <span class="ck">"fraudAnalysis"</span>: {
      <span class="ck">"isAuthentic"</span>: <span class="cb">true</span>,
      <span class="ck">"riskLevel"</span>: <span class="cs">"low"</span>,
      <span class="ck">"riskScore"</span>: <span class="cn">0</span>
    },
    <span class="ck">"processingTime"</span>: <span class="cn">1780</span>
  }
}`
      },
      cedula: {
        desc: "Professional License issued by SEP with professional title and institution.",
        fields: ["nombre", "numeroCedula", "curp", "profesion", "institucionEducativa", "fechaTitulacion", "folio"],
        filename: "cedula_profesional",
        validateField: "curp",
        validateValue: "GARM88O3O5MDFRRN09",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"C√©dula Profesional"</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.95</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Mar√≠a Garc√≠a Ram√≠rez"</span>,
      <span class="ck">"numeroCedula"</span>: <span class="cs">"12345678"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"GARM880305MDFRRN09"</span>,
      <span class="ck">"profesion"</span>: <span class="cs">"Licenciatura en Ingenier√≠a en Sistemas"</span>,
      <span class="ck">"institucionEducativa"</span>: <span class="cs">"Instituto Polit√©cnico Nacional"</span>,
      <span class="ck">"fechaTitulacion"</span>: <span class="cs">"2012-06-15"</span>
    },
    <span class="ck">"fraudAnalysis"</span>: { <span class="ck">"isAuthentic"</span>: <span class="cb">true</span>, <span class="ck">"riskLevel"</span>: <span class="cs">"low"</span> },
    <span class="ck">"processingTime"</span>: <span class="cn">1650</span>
  }
}`
      },
      imss: {
        desc: "IMSS credential or Social Security Number document.",
        fields: ["nombre", "nss", "curp", "clinicaAsignada", "delegacion"],
        filename: "imss",
        validateField: "nss",
        validateValue: "12345678901",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Credencial IMSS"</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.93</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"nombre"</span>: <span class="cs">"Juan P√©rez Garc√≠a"</span>,
      <span class="ck">"nss"</span>: <span class="cs">"12345678901"</span>,
      <span class="ck">"curp"</span>: <span class="cs">"PEGJ850101HDFRRL09"</span>,
      <span class="ck">"clinicaAsignada"</span>: <span class="cs">"UMF No. 28"</span>,
      <span class="ck">"delegacion"</span>: <span class="cs">"Delegaci√≥n Norte CDMX"</span>
    },
    <span class="ck">"fraudAnalysis"</span>: { <span class="ck">"isAuthentic"</span>: <span class="cb">true</span>, <span class="ck">"riskLevel"</span>: <span class="cs">"low"</span> },
    <span class="ck">"processingTime"</span>: <span class="cn">1580</span>
  }
}`
      },
      foto_vehiculo: {
        desc: "Vehicle photographs for registration, insurance, or inspection purposes.",
        fields: ["marca", "modelo", "color", "placas", "tipoVehiculo", "estadoVehiculo", "vin"],
        filename: "foto_vehiculo",
        validateField: "vin",
        validateValue: "1HGBH41JXMNI09186",
        response: `{
  <span class="ck">"success"</span>: <span class="cb">true</span>,
  <span class="ck">"data"</span>: {
    <span class="ck">"isValid"</span>: <span class="cb">true</span>,
    <span class="ck">"detectedType"</span>: <span class="cs">"Fotograf√≠a Frontal de Veh√≠culo"</span>,
    <span class="ck">"confidence"</span>: <span class="cn">0.88</span>,
    <span class="ck">"extractedData"</span>: {
      <span class="ck">"marca"</span>: <span class="cs">"Honda"</span>,
      <span class="ck">"modelo"</span>: <span class="cs">"Civic"</span>,
      <span class="ck">"color"</span>: <span class="cs">"Blanco"</span>,
      <span class="ck">"placas"</span>: <span class="cs">"ABC-123-A"</span>,
      <span class="ck">"tipoVehiculo"</span>: <span class="cs">"sedan"</span>,
      <span class="ck">"estadoVehiculo"</span>: <span class="cs">"bueno"</span>
    },
    <span class="ck">"fraudAnalysis"</span>: { <span class="ck">"isAuthentic"</span>: <span class="cb">true</span>, <span class="ck">"riskLevel"</span>: <span class="cs">"low"</span> },
    <span class="ck">"processingTime"</span>: <span class="cn">2100</span>
  }
}`
      }
    };

    // Tab switching
    function switchTab(tab) {
      document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById('tab-' + tab).classList.add('active');

      // Initialize Swagger UI on first view
      if (tab === 'swagger' && !window.swaggerInitialized) {
        initSwagger();
        window.swaggerInitialized = true;
      }
    }

    // Swagger UI instance
    let swaggerUI = null;

    // Initialize Swagger UI
    function initSwagger() {
      // Check for saved API key
      const savedKey = localStorage.getItem('docval_api_key');
      if (savedKey) {
        document.getElementById('global-api-key').value = savedKey;
        updateApiKeyStatus(true, savedKey);
      }

      swaggerUI = SwaggerUIBundle({
        url: '/api/openapi?format=json',
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
          SwaggerUIBundle.SwaggerUIStandalonePreset
        ],
        layout: "BaseLayout",
        defaultModelsExpandDepth: -1,
        docExpansion: 'list',
        persistAuthorization: true,
        tryItOutEnabled: true,
        onComplete: function() {
          // Apply saved API key after Swagger loads
          if (savedKey) {
            applyApiKeyToSwagger(savedKey);
          }
        }
      });
    }

    // Apply API key
    function applyApiKey() {
      const apiKey = document.getElementById('global-api-key').value.trim();
      
      if (!apiKey) {
        updateApiKeyStatus(false);
        localStorage.removeItem('docval_api_key');
        return;
      }

      // Save to localStorage
      localStorage.setItem('docval_api_key', apiKey);
      
      // Apply to Swagger UI
      applyApiKeyToSwagger(apiKey);
      
      // Update UI
      updateApiKeyStatus(true, apiKey);
      
      // Button feedback
      const btn = document.getElementById('apply-api-key');
      btn.classList.add('active');
      btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12l5 5L20 7"/></svg> Applied!';
      
      setTimeout(() => {
        btn.classList.remove('active');
        btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M5 12l5 5L20 7"/></svg> Apply';
      }, 2000);
    }

    // Apply API key to Swagger UI authorization
    function applyApiKeyToSwagger(apiKey) {
      if (swaggerUI) {
        swaggerUI.preauthorizeApiKey('ApiKeyAuth', apiKey);
      }
    }

    // Update API key status display
    function updateApiKeyStatus(connected, key) {
      const status = document.getElementById('api-key-status');
      if (connected && key) {
        const maskedKey = key.substring(0, 8) + '...' + key.substring(key.length - 4);
        status.className = 'api-key-status connected';
        status.innerHTML = '<span class="api-key-status-dot"></span><span>Connected with key: ' + maskedKey + '</span>';
      } else {
        status.className = 'api-key-status';
        status.innerHTML = '<span class="api-key-status-dot"></span><span>No API key configured</span>';
      }
    }

    // Handle Enter key in API key input
    document.addEventListener('DOMContentLoaded', function() {
      const input = document.getElementById('global-api-key');
      if (input) {
        input.addEventListener('keypress', function(e) {
          if (e.key === 'Enter') {
            applyApiKey();
          }
        });
      }
    });

    // Document selector
    function selectDoc(type) {
      document.querySelectorAll('.doc-tab').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');

      const data = docData[type];

      document.getElementById('doc-desc').textContent = data.desc;
      document.getElementById('doc-fields-list').innerHTML = data.fields.map(f => `<code>${f}</code>`).join('');
      document.getElementById('url-example').textContent = data.filename;
      document.getElementById('pdfurl-example').textContent = data.filename;
      document.getElementById('file-example').textContent = data.filename;
      document.getElementById('validate-field').textContent = data.validateField;
      document.getElementById('validate-value').textContent = data.validateValue;
      document.getElementById('analyze-response').innerHTML = data.response;
    }

    // Request type selector
    function selectReqType(type) {
      document.querySelectorAll('.req-opt').forEach(t => t.classList.remove('active'));
      event.target.classList.add('active');

      document.querySelectorAll('.request-content').forEach(c => c.classList.remove('active'));
      document.getElementById('req-' + type).classList.add('active');
    }
  </script>
  </body>
</html>
